{{- $kubeTargetVersion := default .Capabilities.KubeVersion.GitVersion .Values.kubeTargetVersionOverride }}
{{- if and (or .Values.grafana.enabled .Values.grafana.forceDeployDashboards) (semverCompare ">=1.14.0-0" $kubeTargetVersion) (semverCompare "<9.9.9-9" $kubeTargetVersion) .Values.grafana.defaultDashboardsEnabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  namespace: {{ template "kube-prometheus-stack-grafana.namespace" . }}
  name: {{ printf "%s-%s" (include "kube-prometheus-stack.fullname" $) "main" | trunc 63 | trimSuffix "-" }}
  annotations:
    grafana_folder: "glb"
  labels:
    {{- if $.Values.grafana.sidecar.dashboards.label }}
    {{ $.Values.grafana.sidecar.dashboards.label }}: {{ ternary $.Values.grafana.sidecar.dashboards.labelValue "1" (not (empty $.Values.grafana.sidecar.dashboards.labelValue)) | quote }}
    {{- end }}
    app: {{ template "kube-prometheus-stack.name" $ }}-grafana
{{ include "kube-prometheus-stack.labels" $ | indent 4 }}
data:
  all-resources.json: |-
    {{`
      {
        "annotations": {
          "list": [
            {
              "builtIn": 1,
              "datasource": {
                "type": "grafana",
                "uid": "-- Grafana --"
              },
              "enable": true,
              "hide": true,
              "iconColor": "rgba(0, 211, 255, 1)",
              "name": "Annotations & Alerts",
              "target": {
                "limit": 100,
                "matchAny": false,
                "tags": [],
                "type": "dashboard"
              },
              "type": "dashboard"
            }
          ]
        },
        "description": "",
        "editable": true,
        "fiscalYearStartMonth": 0,
        "graphTooltip": 0,
        "links": [],
        "liveNow": false,
        "panels": [
          {
            "collapsed": false,
            "gridPos": {
              "h": 1,
              "w": 24,
              "x": 0,
              "y": 0
            },
            "id": 73,
            "panels": [],
            "title": "Main",
            "type": "row"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [
                  {
                    "options": {
                      "match": "null",
                      "result": {
                        "text": "N/A"
                      }
                    },
                    "type": "special"
                  }
                ],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "none"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 3,
              "w": 4,
              "x": 0,
              "y": 1
            },
            "id": 34,
            "links": [],
            "maxDataPoints": 100,
            "options": {
              "colorMode": "none",
              "graphMode": "none",
              "justifyMode": "auto",
              "orientation": "horizontal",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "textMode": "auto"
            },
            "pluginVersion": "9.4.7",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "expr": "count(node_uname_info)",
                "format": "time_series",
                "hide": false,
                "intervalFactor": 2,
                "refId": "A",
                "step": 60
              }
            ],
            "title": "No. of Nodes",
            "type": "stat"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [
                  {
                    "options": {
                      "match": "null",
                      "result": {
                        "text": "N/A"
                      }
                    },
                    "type": "special"
                  }
                ],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "#299c46",
                      "value": null
                    },
                    {
                      "color": "rgba(237, 129, 40, 0.89)",
                      "value": 1
                    },
                    {
                      "color": "#d44a3a"
                    }
                  ]
                },
                "unit": "none"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 3,
              "w": 4,
              "x": 4,
              "y": 1
            },
            "id": 36,
            "links": [],
            "maxDataPoints": 100,
            "options": {
              "colorMode": "background",
              "graphMode": "none",
              "justifyMode": "auto",
              "orientation": "horizontal",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "textMode": "auto"
            },
            "pluginVersion": "9.4.7",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "sum(kube_node_spec_unschedulable{})",
                "format": "time_series",
                "intervalFactor": 1,
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Nodes Unavailable",
            "type": "stat"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "continuous-GrYlRd",
                  "seriesBy": "last"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "opacity",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineStyle": {
                    "fill": "solid"
                  },
                  "lineWidth": 1,
                  "pointSize": 2,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "always",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "area"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "yellow",
                      "value": 1
                    },
                    {
                      "color": "orange",
                      "value": 2
                    },
                    {
                      "color": "red",
                      "value": 3
                    }
                  ]
                },
                "unit": "none"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 18,
              "w": 8,
              "x": 8,
              "y": 1
            },
            "id": 30,
            "options": {
              "legend": {
                "calcs": [
                  "lastNotNull"
                ],
                "displayMode": "table",
                "placement": "right",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "exemplar": true,
                "expr": "kube_deployment_status_replicas_unavailable{namespace=\"default\"}",
                "hide": false,
                "interval": "",
                "legendFormat": "{{ deployment }}",
                "range": true,
                "refId": "E"
              }
            ],
            "title": "deployments [UNAVAILABLE]",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "continuous-GrYlRd",
                  "seriesBy": "last"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "opacity",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineStyle": {
                    "fill": "solid"
                  },
                  "lineWidth": 1,
                  "pointSize": 2,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "always",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "area"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "yellow",
                      "value": 1
                    },
                    {
                      "color": "orange",
                      "value": 2
                    },
                    {
                      "color": "red",
                      "value": 3
                    }
                  ]
                },
                "unit": "none"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 18,
              "w": 8,
              "x": 16,
              "y": 1
            },
            "id": 45,
            "options": {
              "legend": {
                "calcs": [
                  "lastNotNull"
                ],
                "displayMode": "table",
                "placement": "right",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "exemplar": true,
                "expr": "sort_desc(increase(kube_pod_container_status_restarts_total{namespace=~\"default\"}[30m]))",
                "hide": false,
                "interval": "",
                "legendFormat": "{{ container }}",
                "range": true,
                "refId": "E"
              }
            ],
            "title": "container-restarts [30m]",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [
                  {
                    "options": {
                      "match": "null",
                      "result": {
                        "text": "N/A"
                      }
                    },
                    "type": "special"
                  }
                ],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    }
                  ]
                },
                "unit": "none"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 3,
              "w": 4,
              "x": 0,
              "y": 4
            },
            "id": 38,
            "links": [],
            "maxDataPoints": 100,
            "options": {
              "colorMode": "none",
              "graphMode": "none",
              "justifyMode": "auto",
              "orientation": "horizontal",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "textMode": "auto"
            },
            "pluginVersion": "9.4.7",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "builder",
                "expr": "sum(kube_deployment_status_replicas{namespace=~\"default\"})",
                "format": "time_series",
                "intervalFactor": 1,
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Deployments (Total)",
            "type": "stat"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [
                  {
                    "options": {
                      "match": "null",
                      "result": {
                        "text": "N/A"
                      }
                    },
                    "type": "special"
                  }
                ],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "#299c46",
                      "value": null
                    },
                    {
                      "color": "yellow",
                      "value": 1
                    },
                    {
                      "color": "red",
                      "value": 2
                    }
                  ]
                },
                "unit": "none"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 3,
              "w": 4,
              "x": 4,
              "y": 4
            },
            "id": 40,
            "links": [],
            "maxDataPoints": 100,
            "options": {
              "colorMode": "background",
              "graphMode": "none",
              "justifyMode": "auto",
              "orientation": "horizontal",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "textMode": "auto"
            },
            "pluginVersion": "9.4.7",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "sum(kube_deployment_status_replicas_unavailable{namespace=~\"default\"})",
                "format": "time_series",
                "intervalFactor": 1,
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Deployments Unavailable",
            "type": "stat"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "always",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "none"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 5,
              "w": 8,
              "x": 0,
              "y": 7
            },
            "id": 2,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "pluginVersion": "9.4.3",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "kube_deployment_status_replicas{deployment=\"api\"}",
                "legendFormat": "__auto",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "api-deployments-replicas",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "always",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "area"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "yellow",
                      "value": 3
                    },
                    {
                      "color": "orange",
                      "value": 5
                    },
                    {
                      "color": "red",
                      "value": 10
                    }
                  ]
                },
                "unit": "none"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 7,
              "w": 8,
              "x": 0,
              "y": 12
            },
            "id": 46,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "pluginVersion": "9.4.3",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "sum(increase(kube_pod_container_status_restarts_total{namespace=\"default\"}[30m]))",
                "legendFormat": "__auto",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "container-restarts-total-increase [30m]",
            "type": "timeseries"
          },
          {
            "collapsed": false,
            "gridPos": {
              "h": 1,
              "w": 24,
              "x": 0,
              "y": 19
            },
            "id": 71,
            "panels": [],
            "title": "Errors Stats",
            "type": "row"
          },
          {
            "datasource": {
              "type": "elasticsearch",
              "uid": "elastic"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "continuous-GrYlRd"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 20,
                  "gradientMode": "scheme",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "smooth",
                  "lineWidth": 3,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "line+area"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "yellow",
                      "value": 10
                    },
                    {
                      "color": "orange",
                      "value": 30
                    },
                    {
                      "color": "red",
                      "value": 100
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 7,
              "w": 24,
              "x": 0,
              "y": 20
            },
            "id": 50,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "pluginVersion": "9.4.7",
            "targets": [
              {
                "alias": "",
                "bucketAggs": [
                  {
                    "field": "startTimeMillis",
                    "id": "2",
                    "settings": {
                      "interval": "10m",
                      "min_doc_count": "0",
                      "timeZone": "utc",
                      "trimEdges": "0"
                    },
                    "type": "date_histogram"
                  }
                ],
                "datasource": {
                  "type": "elasticsearch",
                  "uid": "elastic"
                },
                "hide": false,
                "metrics": [
                  {
                    "id": "1",
                    "type": "count"
                  }
                ],
                "query": "process.serviceName: api AND tag.error: true AND tag.statusCode : [499 TO *]",
                "refId": "A",
                "timeField": "startTimeMillis"
              }
            ],
            "title": "API Requests [500 errors]",
            "transformations": [],
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "elasticsearch",
              "uid": "elastic"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "align": "auto",
                  "cellOptions": {
                    "type": "auto"
                  },
                  "filterable": true,
                  "inspect": true
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    }
                  ]
                }
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Time"
                  },
                  "properties": [
                    {
                      "id": "custom.width",
                      "value": 170
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Action"
                  },
                  "properties": [
                    {
                      "id": "custom.width",
                      "value": 217
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Status"
                  },
                  "properties": [
                    {
                      "id": "custom.width",
                      "value": 69
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "user_id"
                  },
                  "properties": [
                    {
                      "id": "custom.width",
                      "value": 70
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "api version"
                  },
                  "properties": [
                    {
                      "id": "custom.width",
                      "value": 66
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 10,
              "w": 24,
              "x": 0,
              "y": 27
            },
            "id": 69,
            "options": {
              "footer": {
                "countRows": false,
                "enablePagination": true,
                "fields": [],
                "reducer": [
                  "sum"
                ],
                "show": false
              },
              "showHeader": true,
              "sortBy": []
            },
            "pluginVersion": "9.4.7",
            "targets": [
              {
                "alias": "",
                "bucketAggs": [],
                "datasource": {
                  "type": "elasticsearch",
                  "uid": "elastic"
                },
                "hide": false,
                "metrics": [
                  {
                    "id": "1",
                    "settings": {
                      "limit": "500"
                    },
                    "type": "logs"
                  }
                ],
                "query": "process.serviceName: api AND tag.error: true AND tag.statusCode : [499 TO *]",
                "refId": "A",
                "timeField": "startTimeMillis"
              }
            ],
            "title": "API Latest Errors [500]",
            "transformations": [
              {
                "id": "organize",
                "options": {
                  "excludeByName": {
                    "_id": true,
                    "_index": true,
                    "_source": true,
                    "_type": true,
                    "duration": true,
                    "flags": true,
                    "highlight": true,
                    "operationName": false,
                    "process.serviceName": true,
                    "process.tag.client-uuid": true,
                    "process.tag.hostname": true,
                    "process.tag.ip": true,
                    "process.tag.jaeger@version": true,
                    "process.tags": true,
                    "references": true,
                    "sort": true,
                    "spanID": true,
                    "startTime": true,
                    "startTimeMillis": false,
                    "tag.action": true,
                    "tag.controller": true,
                    "tag.device_id": true,
                    "tag.error": true,
                    "tag.host": true,
                    "tag.http@method": true,
                    "tag.http@status_code": true,
                    "tag.http@url": true,
                    "tag.internal@span@format": true,
                    "tag.isAllowSub": true,
                    "tag.isAndroid": true,
                    "tag.isIOS": true,
                    "tag.isMobile": true,
                    "tag.sampler@param": true,
                    "tag.sampler@type": true,
                    "tag.serverError": true,
                    "tag.span@kind": true,
                    "tag.statusCode": false,
                    "tag.statusMessage": false,
                    "tag.token": true,
                    "tag.userAgent": true,
                    "tag.x-flow-id": true,
                    "tag.x-request-id": true,
                    "tags": true
                  },
                  "indexByName": {
                    "_id": 8,
                    "_index": 9,
                    "_source": 47,
                    "_type": 10,
                    "duration": 11,
                    "flags": 12,
                    "highlight": 13,
                    "logs": 14,
                    "operationName": 1,
                    "process.serviceName": 15,
                    "process.tag.client-uuid": 16,
                    "process.tag.hostname": 17,
                    "process.tag.ip": 18,
                    "process.tag.jaeger@version": 19,
                    "process.tags": 20,
                    "references": 21,
                    "sort": 22,
                    "spanID": 23,
                    "startTime": 24,
                    "startTimeMillis": 0,
                    "tag.action": 25,
                    "tag.api-version": 6,
                    "tag.controller": 26,
                    "tag.device_id": 27,
                    "tag.error": 28,
                    "tag.host": 29,
                    "tag.http@method": 30,
                    "tag.http@status_code": 31,
                    "tag.http@url": 32,
                    "tag.internal@span@format": 33,
                    "tag.isAllowSub": 34,
                    "tag.isAndroid": 35,
                    "tag.isIOS": 36,
                    "tag.isMobile": 37,
                    "tag.sampler@param": 38,
                    "tag.sampler@type": 39,
                    "tag.serverError": 40,
                    "tag.span@kind": 41,
                    "tag.statusCode": 3,
                    "tag.statusMessage": 2,
                    "tag.token": 42,
                    "tag.userAgent": 43,
                    "tag.user_email": 4,
                    "tag.user_id": 5,
                    "tag.x-flow-id": 44,
                    "tag.x-request-id": 45,
                    "tags": 46,
                    "traceID": 7
                  },
                  "renameByName": {
                    "_id": "",
                    "operationName": "Action",
                    "startTimeMillis": "Time",
                    "tag.api-version": "api version",
                    "tag.statusCode": "Status",
                    "tag.statusMessage": "Message",
                    "tag.user_email": "user_email",
                    "tag.user_id": "user_id"
                  }
                }
              }
            ],
            "type": "table"
          },
          {
            "datasource": {
              "type": "elasticsearch",
              "uid": "elastic"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "continuous-GrYlRd"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 20,
                  "gradientMode": "scheme",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "smooth",
                  "lineWidth": 3,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "line+area"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "yellow",
                      "value": 10
                    },
                    {
                      "color": "orange",
                      "value": 30
                    },
                    {
                      "color": "red",
                      "value": 100
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 8,
              "x": 0,
              "y": 37
            },
            "id": 56,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "pluginVersion": "9.4.7",
            "targets": [
              {
                "alias": "",
                "bucketAggs": [
                  {
                    "field": "startTimeMillis",
                    "id": "2",
                    "settings": {
                      "interval": "10m",
                      "min_doc_count": "0",
                      "timeZone": "utc",
                      "trimEdges": "0"
                    },
                    "type": "date_histogram"
                  }
                ],
                "datasource": {
                  "type": "elasticsearch",
                  "uid": "elastic"
                },
                "hide": false,
                "metrics": [
                  {
                    "id": "1",
                    "type": "count"
                  }
                ],
                "query": "tag.error: true AND operationName : *ProductController\\:createProduct* AND tag.statusCode : [499 TO *]",
                "refId": "A",
                "timeField": "startTimeMillis"
              }
            ],
            "title": "POST /api/product [500 errors]",
            "transformations": [],
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "elasticsearch",
              "uid": "elastic"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "continuous-GrYlRd"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 20,
                  "gradientMode": "scheme",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "smooth",
                  "lineWidth": 3,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "line+area"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "yellow",
                      "value": 10
                    },
                    {
                      "color": "orange",
                      "value": 30
                    },
                    {
                      "color": "red",
                      "value": 100
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 8,
              "x": 8,
              "y": 37
            },
            "id": 58,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "pluginVersion": "9.4.7",
            "targets": [
              {
                "alias": "",
                "bucketAggs": [
                  {
                    "field": "startTimeMillis",
                    "id": "2",
                    "settings": {
                      "interval": "10m",
                      "min_doc_count": "0",
                      "timeZone": "utc",
                      "trimEdges": "0"
                    },
                    "type": "date_histogram"
                  }
                ],
                "datasource": {
                  "type": "elasticsearch",
                  "uid": "elastic"
                },
                "hide": false,
                "metrics": [
                  {
                    "id": "1",
                    "type": "count"
                  }
                ],
                "query": "tag.error: true AND operationName : *ProductController\\:update* AND tag.statusCode : [499 TO *]",
                "refId": "A",
                "timeField": "startTimeMillis"
              }
            ],
            "title": "PUT /api/product/:id [500 errors]",
            "transformations": [],
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "elasticsearch",
              "uid": "elastic"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "continuous-GrYlRd"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 20,
                  "gradientMode": "scheme",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "smooth",
                  "lineWidth": 3,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "line+area"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "yellow",
                      "value": 10
                    },
                    {
                      "color": "orange",
                      "value": 30
                    },
                    {
                      "color": "red",
                      "value": 100
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 8,
              "x": 16,
              "y": 37
            },
            "id": 60,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "pluginVersion": "9.4.7",
            "targets": [
              {
                "alias": "",
                "bucketAggs": [
                  {
                    "field": "startTimeMillis",
                    "id": "2",
                    "settings": {
                      "interval": "auto",
                      "min_doc_count": "0",
                      "timeZone": "utc",
                      "trimEdges": "0"
                    },
                    "type": "date_histogram"
                  }
                ],
                "datasource": {
                  "type": "elasticsearch",
                  "uid": "elastic"
                },
                "hide": false,
                "metrics": [
                  {
                    "id": "1",
                    "type": "count"
                  }
                ],
                "query": "tag.error: true AND operationName : *AttributesController\\:createAttribute* AND tag.statusCode : [499 TO *]",
                "refId": "A",
                "timeField": "startTimeMillis"
              }
            ],
            "title": "POST /api/attributes [500 errors]",
            "transformations": [],
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "elasticsearch",
              "uid": "elastic"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "continuous-GrYlRd"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 20,
                  "gradientMode": "scheme",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "smooth",
                  "lineWidth": 3,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "line+area"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "yellow",
                      "value": 10
                    },
                    {
                      "color": "orange",
                      "value": 30
                    },
                    {
                      "color": "red",
                      "value": 100
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 6,
              "x": 0,
              "y": 43
            },
            "id": 66,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "pluginVersion": "9.4.7",
            "targets": [
              {
                "alias": "",
                "bucketAggs": [
                  {
                    "field": "startTimeMillis",
                    "id": "2",
                    "settings": {
                      "interval": "auto",
                      "min_doc_count": "0",
                      "timeZone": "utc",
                      "trimEdges": "0"
                    },
                    "type": "date_histogram"
                  }
                ],
                "datasource": {
                  "type": "elasticsearch",
                  "uid": "elastic"
                },
                "hide": false,
                "metrics": [
                  {
                    "id": "1",
                    "type": "count"
                  }
                ],
                "query": "tag.error: true AND operationName : *ContentController\\:removeDust* AND tag.statusCode : [499 TO *]",
                "refId": "A",
                "timeField": "startTimeMillis"
              }
            ],
            "title": "POST /api/content/remove-dust [500 errors]",
            "transformations": [],
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "elasticsearch",
              "uid": "elastic"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "continuous-GrYlRd"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 20,
                  "gradientMode": "scheme",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "smooth",
                  "lineWidth": 3,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "line+area"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "yellow",
                      "value": 10
                    },
                    {
                      "color": "orange",
                      "value": 30
                    },
                    {
                      "color": "red",
                      "value": 100
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 6,
              "x": 6,
              "y": 43
            },
            "id": 62,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "pluginVersion": "9.4.7",
            "targets": [
              {
                "alias": "",
                "bucketAggs": [
                  {
                    "field": "startTimeMillis",
                    "id": "2",
                    "settings": {
                      "interval": "10m",
                      "min_doc_count": "0",
                      "timeZone": "utc",
                      "trimEdges": "0"
                    },
                    "type": "date_histogram"
                  }
                ],
                "datasource": {
                  "type": "elasticsearch",
                  "uid": "elastic"
                },
                "hide": false,
                "metrics": [
                  {
                    "id": "1",
                    "type": "count"
                  }
                ],
                "query": "tag.error: true AND operationName : *ContentController\\:getBackgroundRemoval* AND tag.statusCode : [499 TO *]",
                "refId": "A",
                "timeField": "startTimeMillis"
              }
            ],
            "title": "POST /api/content/v3/background-removal [500 errors]",
            "transformations": [],
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "elasticsearch",
              "uid": "elastic"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "continuous-GrYlRd"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 20,
                  "gradientMode": "scheme",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "smooth",
                  "lineWidth": 3,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "line+area"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "yellow",
                      "value": 10
                    },
                    {
                      "color": "orange",
                      "value": 30
                    },
                    {
                      "color": "red",
                      "value": 100
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 6,
              "x": 12,
              "y": 43
            },
            "id": 68,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "pluginVersion": "9.4.7",
            "targets": [
              {
                "alias": "",
                "bucketAggs": [
                  {
                    "field": "startTimeMillis",
                    "id": "2",
                    "settings": {
                      "interval": "10m",
                      "min_doc_count": "0",
                      "timeZone": "utc",
                      "trimEdges": "0"
                    },
                    "type": "date_histogram"
                  }
                ],
                "datasource": {
                  "type": "elasticsearch",
                  "uid": "elastic"
                },
                "hide": false,
                "metrics": [
                  {
                    "id": "1",
                    "type": "count"
                  }
                ],
                "query": "tag.error: true AND operationName : *ContentController\\:resizeDownload* AND tag.statusCode : [499 TO *]",
                "refId": "A",
                "timeField": "startTimeMillis"
              }
            ],
            "title": "GET /api/content/download/resize [500 errors]",
            "transformations": [],
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "elasticsearch",
              "uid": "elastic"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "continuous-GrYlRd"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 20,
                  "gradientMode": "scheme",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "smooth",
                  "lineWidth": 3,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "line+area"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "yellow",
                      "value": 10
                    },
                    {
                      "color": "orange",
                      "value": 30
                    },
                    {
                      "color": "red",
                      "value": 100
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 6,
              "x": 18,
              "y": 43
            },
            "id": 64,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "pluginVersion": "9.4.7",
            "targets": [
              {
                "alias": "",
                "bucketAggs": [
                  {
                    "field": "startTimeMillis",
                    "id": "2",
                    "settings": {
                      "interval": "10m",
                      "min_doc_count": "0",
                      "timeZone": "utc",
                      "trimEdges": "0"
                    },
                    "type": "date_histogram"
                  }
                ],
                "datasource": {
                  "type": "elasticsearch",
                  "uid": "elastic"
                },
                "hide": false,
                "metrics": [
                  {
                    "id": "1",
                    "type": "count"
                  }
                ],
                "query": "tag.error: true AND operationName : *ContentController\\:ai_retouch* AND tag.statusCode : [499 TO *]",
                "refId": "A",
                "timeField": "startTimeMillis"
              }
            ],
            "title": "POST /api/content/v3/retouch/ai [500 errors]",
            "transformations": [],
            "type": "timeseries"
          },
          {
            "collapsed": false,
            "gridPos": {
              "h": 1,
              "w": 24,
              "x": 0,
              "y": 49
            },
            "id": 103,
            "panels": [],
            "title": "NodeJS Stats",
            "type": "row"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [
                  {
                    "options": {
                      "match": "null",
                      "result": {
                        "text": "N/A"
                      }
                    },
                    "type": "special"
                  }
                ],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "none"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 4,
              "w": 4,
              "x": 0,
              "y": 50
            },
            "id": 107,
            "links": [],
            "maxDataPoints": 100,
            "options": {
              "colorMode": "value",
              "graphMode": "none",
              "justifyMode": "auto",
              "orientation": "horizontal",
              "reduceOptions": {
                "calcs": [
                  "mean"
                ],
                "fields": "",
                "values": false
              },
              "textMode": "name"
            },
            "pluginVersion": "9.4.7",
            "repeat": "service",
            "repeatDirection": "v",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "group(nodejs_version_info) by (kubernetes_name,version)",
                "legendFormat": "{{kubernetes_name}}: {{version}} ",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Nodejs Version",
            "type": "stat"
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "fill": 1,
            "fillGradient": 0,
            "gridPos": {
              "h": 7,
              "w": 7,
              "x": 4,
              "y": 50
            },
            "hiddenSeries": false,
            "id": 93,
            "legend": {
              "alignAsTable": true,
              "avg": false,
              "current": true,
              "max": true,
              "min": true,
              "show": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "paceLength": 10,
            "percentage": false,
            "pluginVersion": "9.4.7",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "avg(irate(process_cpu_user_seconds_total[5m]) * 100) by (kubernetes_name)",
                "format": "time_series",
                "hide": false,
                "intervalFactor": 1,
                "legendFormat": "{{kubernetes_name}}",
                "range": true,
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeRegions": [],
            "title": "nodejs CPU Usage",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "mode": "time",
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "format": "percent",
                "logBase": 1,
                "show": true
              },
              {
                "format": "short",
                "logBase": 1,
                "show": true
              }
            ],
            "yaxis": {
              "align": false
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "fill": 1,
            "fillGradient": 0,
            "gridPos": {
              "h": 7,
              "w": 7,
              "x": 11,
              "y": 50
            },
            "hiddenSeries": false,
            "id": 95,
            "legend": {
              "alignAsTable": true,
              "avg": false,
              "current": true,
              "max": true,
              "min": true,
              "show": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "paceLength": 10,
            "percentage": false,
            "pluginVersion": "9.4.7",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "exemplar": false,
                "expr": "avg(nodejs_eventloop_lag_seconds) by (kubernetes_name) ",
                "format": "time_series",
                "intervalFactor": 1,
                "legendFormat": "{{kubernetes_name}}",
                "range": true,
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeRegions": [],
            "title": "nodejs Event Loop Lag",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "mode": "time",
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "format": "s",
                "logBase": 1,
                "show": true
              },
              {
                "format": "short",
                "logBase": 1,
                "show": true
              }
            ],
            "yaxis": {
              "align": false
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "fill": 1,
            "fillGradient": 0,
            "gridPos": {
              "h": 7,
              "w": 6,
              "x": 18,
              "y": 50
            },
            "hiddenSeries": false,
            "id": 111,
            "legend": {
              "alignAsTable": true,
              "avg": false,
              "current": true,
              "max": true,
              "min": true,
              "show": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "paceLength": 10,
            "percentage": false,
            "pluginVersion": "9.4.7",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "nodejs_active_handles_total ",
                "format": "time_series",
                "intervalFactor": 1,
                "legendFormat": "Active Handler - {{kubernetes_name}}",
                "range": true,
                "refId": "A"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "nodejs_active_requests_total",
                "format": "time_series",
                "intervalFactor": 1,
                "legendFormat": "Active Request - {{kubernetes_name}}",
                "range": true,
                "refId": "B"
              }
            ],
            "thresholds": [],
            "timeRegions": [],
            "title": "Active Handlers/Requests Total",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "mode": "time",
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "format": "short",
                "logBase": 1,
                "show": true
              },
              {
                "format": "short",
                "logBase": 1,
                "show": true
              }
            ],
            "yaxis": {
              "align": false
            }
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "fixedColor": "#F2495C",
                  "mode": "fixed"
                },
                "mappings": [
                  {
                    "options": {
                      "match": "null",
                      "result": {
                        "text": "N/A"
                      }
                    },
                    "type": "special"
                  }
                ],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "none"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 3,
              "w": 4,
              "x": 0,
              "y": 54
            },
            "id": 109,
            "links": [],
            "maxDataPoints": 100,
            "options": {
              "colorMode": "none",
              "graphMode": "area",
              "justifyMode": "auto",
              "orientation": "horizontal",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "textMode": "auto"
            },
            "pluginVersion": "9.4.7",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "sum(changes(process_start_time_seconds[30m]))",
                "format": "time_series",
                "intervalFactor": 1,
                "legendFormat": "__auto",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Restart Times [30m]",
            "type": "stat"
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "fill": 1,
            "fillGradient": 0,
            "gridPos": {
              "h": 7,
              "w": 12,
              "x": 0,
              "y": 57
            },
            "hiddenSeries": false,
            "id": 101,
            "legend": {
              "alignAsTable": true,
              "avg": false,
              "current": true,
              "max": true,
              "min": true,
              "rightSide": true,
              "show": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "paceLength": 10,
            "percentage": false,
            "pluginVersion": "9.4.7",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "exemplar": false,
                "expr": "avg(process_resident_memory_bytes) by (kubernetes_name)",
                "format": "time_series",
                "instant": false,
                "intervalFactor": 1,
                "legendFormat": "{{kubernetes_name}}",
                "range": true,
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeRegions": [],
            "title": "nodejs Memory Usage",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "mode": "time",
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "format": "bytes",
                "logBase": 1,
                "show": true
              },
              {
                "format": "short",
                "logBase": 1,
                "show": true
              }
            ],
            "yaxis": {
              "align": false
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "fill": 1,
            "fillGradient": 0,
            "gridPos": {
              "h": 7,
              "w": 12,
              "x": 12,
              "y": 57
            },
            "hiddenSeries": false,
            "id": 99,
            "legend": {
              "alignAsTable": true,
              "avg": false,
              "current": true,
              "max": true,
              "min": true,
              "rightSide": true,
              "show": true,
              "sort": "max",
              "sortDesc": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "paceLength": 10,
            "percentage": false,
            "pluginVersion": "9.4.7",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "avg(nodejs_heap_size_total_bytes) by (kubernetes_name)",
                "format": "time_series",
                "intervalFactor": 1,
                "legendFormat": "Total - {{kubernetes_name}}",
                "range": true,
                "refId": "B"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "avg(nodejs_heap_size_used_bytes) by (kubernetes_name)",
                "format": "time_series",
                "hide": false,
                "intervalFactor": 1,
                "legendFormat": "Used - {{kubernetes_name}}",
                "range": true,
                "refId": "C"
              }
            ],
            "thresholds": [],
            "timeRegions": [],
            "title": "nodejs Heap Usage",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "mode": "time",
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "format": "bytes",
                "logBase": 1,
                "show": true
              },
              {
                "format": "short",
                "logBase": 1,
                "show": true
              }
            ],
            "yaxis": {
              "align": false
            }
          },
          {
            "collapsed": false,
            "gridPos": {
              "h": 1,
              "w": 24,
              "x": 0,
              "y": 64
            },
            "id": 77,
            "panels": [],
            "title": "Redis Stats",
            "type": "row"
          },
          {
            "datasource": {
              "type": "redis-datasource",
              "uid": "redis"
            },
            "fieldConfig": {
              "defaults": {
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "dark-blue",
                      "value": null
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 3,
              "w": 3,
              "x": 0,
              "y": 65
            },
            "id": 81,
            "options": {
              "colorMode": "background",
              "graphMode": "area",
              "justifyMode": "center",
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "mean"
                ],
                "fields": "/.*/",
                "values": true
              },
              "text": {},
              "textMode": "auto"
            },
            "pluginVersion": "9.4.7",
            "targets": [
              {
                "command": "info",
                "datasource": {
                  "type": "redis-datasource",
                  "uid": "redis"
                },
                "query": "",
                "refId": "A",
                "section": "server",
                "type": "command"
              }
            ],
            "title": "Version",
            "transformations": [
              {
                "id": "filterFieldsByName",
                "options": {
                  "include": {
                    "names": [
                      "redis_version"
                    ]
                  }
                }
              }
            ],
            "type": "stat"
          },
          {
            "datasource": {
              "uid": "redis"
            },
            "fieldConfig": {
              "defaults": {
                "decimals": 0,
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "dark-blue",
                      "value": null
                    }
                  ]
                },
                "unit": "s"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 3,
              "w": 3,
              "x": 3,
              "y": 65
            },
            "id": 79,
            "options": {
              "colorMode": "background",
              "graphMode": "area",
              "justifyMode": "auto",
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "mean"
                ],
                "fields": "/.*/",
                "values": true
              },
              "text": {},
              "textMode": "auto"
            },
            "pluginVersion": "9.4.7",
            "targets": [
              {
                "command": "info",
                "datasource": {
                  "uid": "redis"
                },
                "query": "",
                "refId": "A",
                "section": "server",
                "type": "command"
              }
            ],
            "title": "Uptime",
            "transformations": [
              {
                "id": "filterFieldsByName",
                "options": {
                  "include": {
                    "names": [
                      "uptime_in_seconds"
                    ]
                  }
                }
              }
            ],
            "type": "stat"
          },
          {
            "datasource": {
              "uid": "redis"
            },
            "fieldConfig": {
              "defaults": {
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "dark-green",
                      "value": null
                    }
                  ]
                },
                "unit": "decbytes"
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Used Memory"
                  },
                  "properties": [
                    {
                      "id": "decimals",
                      "value": 2
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Used Memory, Peak"
                  },
                  "properties": [
                    {
                      "id": "decimals",
                      "value": 2
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Used Memory, LUA"
                  },
                  "properties": [
                    {
                      "id": "decimals",
                      "value": 2
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Memory Limit"
                  },
                  "properties": [
                    {
                      "id": "decimals",
                      "value": 2
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Total System Memory"
                  },
                  "properties": [
                    {
                      "id": "decimals",
                      "value": 2
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 6,
              "w": 9,
              "x": 6,
              "y": 65
            },
            "id": 83,
            "options": {
              "displayMode": "lcd",
              "minVizHeight": 10,
              "minVizWidth": 0,
              "orientation": "horizontal",
              "reduceOptions": {
                "calcs": [
                  "mean"
                ],
                "fields": "/.*/",
                "values": true
              },
              "showUnfilled": true,
              "text": {}
            },
            "pluginVersion": "9.4.7",
            "targets": [
              {
                "command": "info",
                "datasource": {
                  "uid": "redis"
                },
                "query": "",
                "refId": "A",
                "section": "memory",
                "type": "command"
              }
            ],
            "title": "Memory",
            "transformations": [
              {
                "id": "filterFieldsByName",
                "options": {
                  "include": {
                    "names": [
                      "used_memory",
                      "used_memory_peak",
                      "total_system_memory",
                      "maxmemory",
                      "used_memory_lua"
                    ]
                  }
                }
              },
              {
                "id": "organize",
                "options": {
                  "excludeByName": {},
                  "indexByName": {
                    "maxmemory": 3,
                    "total_system_memory": 4,
                    "used_memory": 0,
                    "used_memory_lua": 2,
                    "used_memory_peak": 1
                  },
                  "renameByName": {
                    "maxmemory": "Memory Limit",
                    "total_system_memory": "Total System Memory",
                    "used_memory": "Used Memory",
                    "used_memory_lua": "Used Memory, LUA",
                    "used_memory_peak": "Used Memory, Peak"
                  }
                }
              }
            ],
            "type": "bargauge"
          },
          {
            "datasource": {
              "uid": "redis"
            },
            "fieldConfig": {
              "defaults": {
                "custom": {
                  "align": "auto",
                  "cellOptions": {
                    "type": "color-text"
                  },
                  "filterable": false,
                  "inspect": false
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    }
                  ]
                }
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Unique progressive identifier"
                  },
                  "properties": [
                    {
                      "id": "custom.width",
                      "value": 205
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Timestamp"
                  },
                  "properties": [
                    {
                      "id": "custom.width",
                      "value": 145
                    },
                    {
                      "id": "unit",
                      "value": "dateTimeFromNow"
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Duration"
                  },
                  "properties": [
                    {
                      "id": "custom.width",
                      "value": 92
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Command"
                  },
                  "properties": [
                    {
                      "id": "custom.width",
                      "value": 1185
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 6,
              "w": 9,
              "x": 15,
              "y": 65
            },
            "id": 91,
            "options": {
              "footer": {
                "countRows": false,
                "fields": "",
                "reducer": [
                  "sum"
                ],
                "show": false
              },
              "showHeader": true,
              "sortBy": []
            },
            "pluginVersion": "9.4.7",
            "targets": [
              {
                "command": "slowlogGet",
                "datasource": {
                  "uid": "redis"
                },
                "query": "",
                "refId": "A",
                "type": "command"
              }
            ],
            "title": "Slow queries log",
            "transformations": [
              {
                "id": "organize",
                "options": {
                  "excludeByName": {
                    "Id": true,
                    "Timestamp": false
                  },
                  "indexByName": {
                    "Command": 4,
                    "Duration": 3,
                    "Id": 0,
                    "Timestamp": 1,
                    "Timestamp * 1000": 2
                  },
                  "renameByName": {
                    "Duration": "",
                    "Id": "Id",
                    "Timestamp * 1000": "Timestamp"
                  }
                }
              }
            ],
            "type": "table"
          },
          {
            "datasource": {
              "uid": "redis"
            },
            "fieldConfig": {
              "defaults": {
                "decimals": 0,
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "dark-blue",
                      "value": null
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 3,
              "w": 3,
              "x": 0,
              "y": 68
            },
            "id": 89,
            "options": {
              "colorMode": "background",
              "graphMode": "area",
              "justifyMode": "center",
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "mean"
                ],
                "fields": "/.*/",
                "values": true
              },
              "text": {},
              "textMode": "auto"
            },
            "pluginVersion": "9.4.7",
            "targets": [
              {
                "command": "info",
                "datasource": {
                  "uid": "redis"
                },
                "query": "",
                "refId": "A",
                "section": "clients",
                "type": "command"
              }
            ],
            "title": "Connected Clients",
            "transformations": [
              {
                "id": "filterFieldsByName",
                "options": {
                  "include": {
                    "names": [
                      "connected_clients"
                    ]
                  }
                }
              }
            ],
            "type": "stat"
          },
          {
            "datasource": {
              "uid": "redis"
            },
            "fieldConfig": {
              "defaults": {
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "dark-blue",
                      "value": null
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 3,
              "w": 3,
              "x": 3,
              "y": 68
            },
            "id": 87,
            "options": {
              "colorMode": "background",
              "graphMode": "area",
              "justifyMode": "center",
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "mean"
                ],
                "fields": "/.*/",
                "values": true
              },
              "text": {},
              "textMode": "auto"
            },
            "pluginVersion": "9.4.7",
            "targets": [
              {
                "datasource": {
                  "uid": "redis"
                },
                "query": "dbsize",
                "refId": "A",
                "type": "cli"
              }
            ],
            "title": "Number of Keys",
            "type": "stat"
          },
          {
            "collapsed": false,
            "gridPos": {
              "h": 1,
              "w": 24,
              "x": 0,
              "y": 71
            },
            "id": 75,
            "panels": [],
            "title": "Requests/Health Stats",
            "type": "row"
          },
          {
            "datasource": {
              "type": "elasticsearch",
              "uid": "elastic"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "continuous-RdYlGr"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 20,
                  "gradientMode": "scheme",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "smooth",
                  "lineWidth": 3,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "line+area"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "red",
                      "value": null
                    },
                    {
                      "color": "orange",
                      "value": 300
                    },
                    {
                      "color": "green",
                      "value": 1000
                    }
                  ]
                },
                "unit": "none"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 8,
              "x": 0,
              "y": 72
            },
            "id": 48,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "pluginVersion": "9.4.7",
            "targets": [
              {
                "alias": "",
                "bucketAggs": [
                  {
                    "field": "startTimeMillis",
                    "id": "2",
                    "settings": {
                      "interval": "10m",
                      "min_doc_count": "0",
                      "timeZone": "utc",
                      "trimEdges": "0"
                    },
                    "type": "date_histogram"
                  }
                ],
                "datasource": {
                  "type": "elasticsearch",
                  "uid": "elastic"
                },
                "hide": false,
                "metrics": [
                  {
                    "id": "1",
                    "type": "count"
                  }
                ],
                "query": "process.serviceName: api",
                "refId": "A",
                "timeField": "startTimeMillis"
              }
            ],
            "title": "API Requests [All]",
            "transformations": [],
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds",
                  "seriesBy": "last"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "left",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "opacity",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineStyle": {
                    "fill": "solid"
                  },
                  "lineWidth": 1,
                  "pointSize": 2,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "always",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "area"
                  }
                },
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "red",
                      "value": null
                    },
                    {
                      "color": "green",
                      "value": 1
                    }
                  ]
                },
                "unit": "none"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 12,
              "w": 8,
              "x": 8,
              "y": 72
            },
            "id": 32,
            "options": {
              "legend": {
                "calcs": [
                  "lastNotNull"
                ],
                "displayMode": "table",
                "placement": "right",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "builder",
                "exemplar": true,
                "expr": "kube_deployment_status_replicas_available{namespace=\"default\"}",
                "format": "time_series",
                "hide": false,
                "instant": false,
                "interval": "1",
                "legendFormat": "{{deployment}}",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Deployments [HEALTHY]",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "continuous-GrYlRd"
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 17,
              "w": 8,
              "x": 16,
              "y": 72
            },
            "id": 44,
            "options": {
              "displayMode": "basic",
              "minVizHeight": 10,
              "minVizWidth": 0,
              "orientation": "horizontal",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "showUnfilled": true
            },
            "pluginVersion": "9.4.7",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "builder",
                "exemplar": true,
                "expr": "kube_pod_container_status_restarts_total{namespace=\"default\"}",
                "format": "time_series",
                "hide": true,
                "instant": false,
                "interval": "1",
                "legendFormat": "__auto",
                "range": true,
                "refId": "A"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "kube_pod_container_status_restarts_total{namespace=~\"default\"}",
                "hide": false,
                "legendFormat": "__auto",
                "range": true,
                "refId": "B"
              }
            ],
            "title": "Container restarts [Total]",
            "transformations": [
              {
                "id": "joinByLabels",
                "options": {
                  "value": "container"
                }
              }
            ],
            "type": "bargauge"
          },
          {
            "datasource": {
              "type": "elasticsearch",
              "uid": "elastic"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "continuous-RdYlGr"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 20,
                  "gradientMode": "scheme",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "smooth",
                  "lineWidth": 3,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "line+area"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "red",
                      "value": null
                    },
                    {
                      "color": "#EAB839",
                      "value": 500
                    },
                    {
                      "color": "green",
                      "value": 1000
                    }
                  ]
                },
                "unit": "none"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 8,
              "x": 0,
              "y": 78
            },
            "id": 52,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "pluginVersion": "9.4.7",
            "targets": [
              {
                "alias": "",
                "bucketAggs": [
                  {
                    "field": "startTimeMillis",
                    "id": "2",
                    "settings": {
                      "interval": "10m",
                      "min_doc_count": "0",
                      "timeZone": "utc",
                      "trimEdges": "0"
                    },
                    "type": "date_histogram"
                  }
                ],
                "datasource": {
                  "type": "elasticsearch",
                  "uid": "elastic"
                },
                "hide": false,
                "metrics": [
                  {
                    "id": "1",
                    "type": "count"
                  }
                ],
                "query": "process.serviceName:sync",
                "refId": "A",
                "timeField": "startTimeMillis"
              }
            ],
            "title": "Hubspot Sync [All]",
            "transformations": [],
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "elasticsearch",
              "uid": "elastic"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "continuous-RdYlGr"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 20,
                  "gradientMode": "scheme",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "smooth",
                  "lineWidth": 3,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "line+area"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "red",
                      "value": null
                    },
                    {
                      "color": "orange",
                      "value": 5
                    },
                    {
                      "color": "green",
                      "value": 20
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 5,
              "w": 8,
              "x": 0,
              "y": 84
            },
            "id": 54,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "pluginVersion": "9.4.7",
            "targets": [
              {
                "alias": "",
                "bucketAggs": [
                  {
                    "field": "startTimeMillis",
                    "id": "2",
                    "settings": {
                      "interval": "10m",
                      "min_doc_count": "0",
                      "timeZone": "utc",
                      "trimEdges": "0"
                    },
                    "type": "date_histogram"
                  }
                ],
                "datasource": {
                  "type": "elasticsearch",
                  "uid": "elastic"
                },
                "hide": false,
                "metrics": [
                  {
                    "id": "1",
                    "type": "count"
                  }
                ],
                "query": "process.serviceName:redis-worker",
                "refId": "A",
                "timeField": "startTimeMillis"
              }
            ],
            "title": "Redis Worker[All]",
            "transformations": [],
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "continuous-GrYlRd",
                  "seriesBy": "last"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "opacity",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineStyle": {
                    "fill": "solid"
                  },
                  "lineWidth": 1,
                  "pointSize": 2,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "always",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "area"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "red",
                      "value": null
                    },
                    {
                      "color": "green",
                      "value": 1
                    }
                  ]
                },
                "unit": "none"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 5,
              "w": 8,
              "x": 8,
              "y": 84
            },
            "id": 42,
            "options": {
              "legend": {
                "calcs": [
                  "lastNotNull"
                ],
                "displayMode": "table",
                "placement": "right",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "exemplar": true,
                "expr": "kube_horizontalpodautoscaler_status_current_replicas{namespace=\"default\"}",
                "interval": "",
                "legendFormat": "{{ horizontalpodautoscaler }} Healthy ({{ cluster }})",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "pods-horizontal-scale [healthy]",
            "type": "timeseries"
          }
        ],
        "refresh": "",
        "revision": 1,
        "schemaVersion": 38,
        "style": "dark",
        "tags": [],
        "templating": {
          "list": [
            {
              "datasource": {
                "type": "elasticsearch",
                "uid": "elastic"
              },
              "filters": [],
              "hide": 0,
              "name": "Filters",
              "skipUrlSync": false,
              "type": "adhoc"
            }
          ]
        },
        "time": {
          "from": "now-24h",
          "to": "now"
        },
        "timepicker": {},
        "timezone": "",
        "title": "All Resources",
        "uid": "glb-main",
        "version": 1,
        "weekStart": ""
      }
    `}}
{{- end }}